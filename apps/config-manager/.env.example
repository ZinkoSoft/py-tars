# ===== Configuration Database =====
CONFIG_DB_PATH=/data/config/config.db
CONFIG_LKG_CACHE_PATH=/data/config/config.lkg.json
CONFIG_EPOCH_PATH=/data/config/health+epoch.json

# ===== Encryption Keys (auto-generated on first run if missing) =====
# Master key for AES-256-GCM encryption of database secrets (32 bytes base64)
CONFIG_MASTER_KEY_BASE64=CHANGEME_base64_encoded_32_bytes
CONFIG_MASTER_KEY_ID=00000000-0000-0000-0000-000000000000

# HMAC key for signing LKG cache (32 bytes base64)
LKG_HMAC_KEY_BASE64=CHANGEME_base64_encoded_32_bytes
LKG_HMAC_KEY_ID=00000000-0000-0000-0000-000000000000

# ===== Ed25519 Signature Keys (auto-generated on first run if missing) =====
# For signing MQTT configuration update messages
CONFIG_SIGNATURE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nCHANGEME\n-----END PRIVATE KEY-----"
CONFIG_SIGNATURE_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nCHANGEME\n-----END PUBLIC KEY-----"

# ===== Recovery & Rebuild =====
# Allow automatic database rebuild on corruption (0=disabled, 1=enabled)
ALLOW_AUTO_REBUILD=0

# Token required for manual rebuild trigger via API (generate secure random string)
REBUILD_TOKEN=CHANGEME_secure_random_token

# ===== Litestream Backup =====
# S3-compatible storage for continuous backups
LITESTREAM_S3_ENDPOINT=https://s3.amazonaws.com
LITESTREAM_S3_BUCKET=tars-config-backups
LITESTREAM_S3_PATH=config-db
LITESTREAM_ACCESS_KEY_ID=CHANGEME
LITESTREAM_SECRET_ACCESS_KEY=CHANGEME
LITESTREAM_RETENTION_HOURS=168  # 7 days

# ===== MQTT =====
MQTT_URL=mqtt://user:password@localhost:1883

# ===== Config Manager Service =====
CONFIG_MANAGER_HOST=0.0.0.0
CONFIG_MANAGER_PORT=8081
CONFIG_MANAGER_LOG_LEVEL=INFO

# ===== Access Control =====
# API tokens for REST endpoints (comma-separated: token:role)
# Roles: config.read (view configs), config.write (modify configs)
CONFIG_API_TOKENS="readonly-token:config.read,admin-token:config.write"
